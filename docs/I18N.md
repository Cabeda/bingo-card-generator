# Internationalization (i18n) Guide

This document explains how the internationalization system works in the Bingo Card Generator application and how to add
new languages or modify translations.

## Overview

The application uses [next-intl](https://next-intl-docs.vercel.app/) for internationalization support. This provides a
robust solution for managing translations in Next.js applications with the App Router.

## Supported Languages

Currently, the application supports four languages:

- **English (en)** - English
- **Portuguese (pt)** - Português (Default)
- **Spanish (es)** - Español
- **French (fr)** - Français

## Architecture

### Key Files

- **`middleware.ts`** - Handles locale detection and routing
- **`app/routing.ts`** - Defines routing configuration and exports navigation utilities
- **`app/i18n.ts`** - Configures message loading
- **`messages/`** - Directory containing translation files for each language

### URL Structure

All routes are prefixed with the locale (e.g., `/en`, `/pt`, `/es/game`)

## Adding a New Language

See the full guide in the documentation for step-by-step instructions on adding new languages.

## Resources

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [ICU MessageFormat](https://unicode-org.github.io/icu/userguide/format_parse/messages/)

## Testing Translations

The project includes comprehensive testing for internationalization to ensure translation quality and consistency.

### Translation Coverage Tests

Automated tests verify that:

- All translation keys exist in all supported locales
- No keys are missing or extra in any locale
- All translation values are non-empty
- Placeholder variables (like `{count}`) are consistent across locales
- The structure of translation files is consistent

**Run translation coverage tests:**

```bash
npm test -- app/utils/i18n.test.ts
# or run all i18n tests
npm run test:i18n
```

**Quick validation:**

```bash
npm run validate:i18n
```

**Note:** Translation coverage tests will intentionally fail if any
locale is missing keys. This helps catch incomplete translations
during development.

### Visual Regression Tests

Visual tests ensure UI components render correctly across all locales:

- Text doesn't overflow or get truncated
- Layout remains consistent with different text lengths
- Special characters and emojis display properly
- Components are ready for RTL (right-to-left) language support

**Run visual regression tests:**

```bash
npm test -- app/components/I18nVisualTest.test.tsx
```

### Adding New Translations

When adding new translation keys:

1. Add the key to `messages/en.json` first
2. Add the same key structure to all other locale files
   (es.json, fr.json, pt.json)
3. Run translation coverage tests to verify completeness
4. Consider testing with the longest expected translation for
   layout issues

See [TESTING.md](../TESTING.md) for more details on
internationalization testing.
